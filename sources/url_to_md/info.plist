<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE plist PUBLIC "-//Apple//DTD PLIST 1.0//EN" "http://www.apple.com/DTDs/PropertyList-1.0.dtd">
<plist version="1.0">
<dict>
	<key>bundleid</key>
	<string>xyz.cdpath.md</string>
	<key>category</key>
	<string>Productivity</string>
	<key>connections</key>
	<dict>
		<key>2F3318C1-8262-43BD-A456-EB2B2A94C650</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>6454D7E8-56CF-4DC4-A058-359AB7FED372</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>494649E5-798B-46A8-B318-39FBCBF033A6</key>
		<array/>
		<key>6454D7E8-56CF-4DC4-A058-359AB7FED372</key>
		<array/>
		<key>8942009E-7800-4303-B4CD-C81203ACC682</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>B35F3739-AAF8-4F94-93A6-9B98060EDF42</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>9E69036A-1B66-4A10-9046-99A3EAA4B03A</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>A00FE09C-8869-4DE4-B922-B1D8A69FDCA4</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>A00FE09C-8869-4DE4-B922-B1D8A69FDCA4</key>
		<array/>
		<key>A9F3E232-7873-445F-AD50-A12415B273FE</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>8942009E-7800-4303-B4CD-C81203ACC682</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>B467D021-411C-452E-8810-B065722585C3</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
			<dict>
				<key>destinationuid</key>
				<string>2F3318C1-8262-43BD-A456-EB2B2A94C650</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>B35F3739-AAF8-4F94-93A6-9B98060EDF42</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>494649E5-798B-46A8-B318-39FBCBF033A6</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>B467D021-411C-452E-8810-B065722585C3</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>9E69036A-1B66-4A10-9046-99A3EAA4B03A</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
		<key>ED3AEF7C-DD02-43F9-977C-DD012FA66446</key>
		<array>
			<dict>
				<key>destinationuid</key>
				<string>A9F3E232-7873-445F-AD50-A12415B273FE</string>
				<key>modifiers</key>
				<integer>0</integer>
				<key>modifiersubtext</key>
				<string></string>
				<key>vitoclose</key>
				<false/>
			</dict>
		</array>
	</dict>
	<key>createdby</key>
	<string>cdpath</string>
	<key>description</key>
	<string></string>
	<key>disabled</key>
	<false/>
	<key>name</key>
	<string>url2md</string>
	<key>objects</key>
	<array>
		<dict>
			<key>config</key>
			<dict>
				<key>count</key>
				<integer>1</integer>
				<key>keychar</key>
				<string>v</string>
				<key>keycode</key>
				<integer>-1</integer>
				<key>keymod</key>
				<integer>1572864</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.output.dispatchkeycombo</string>
			<key>uid</key>
			<string>494649E5-798B-46A8-B318-39FBCBF033A6</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>autopaste</key>
				<false/>
				<key>clipboardtext</key>
				<string>{var:tab_md}</string>
				<key>transient</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.output.clipboard</string>
			<key>uid</key>
			<string>B35F3739-AAF8-4F94-93A6-9B98060EDF42</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>inputstring</key>
				<string>{var:editor}</string>
				<key>matchcasesensitive</key>
				<false/>
				<key>matchmode</key>
				<integer>2</integer>
				<key>matchstring</key>
				<string>ulysses</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.filter</string>
			<key>uid</key>
			<string>8942009E-7800-4303-B4CD-C81203ACC682</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>focusedappvariable</key>
				<true/>
				<key>focusedappvariablename</key>
				<string>editor</string>
				<key>keyword</key>
				<string>u</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.trigger.snippet</string>
			<key>uid</key>
			<string>ED3AEF7C-DD02-43F9-977C-DD012FA66446</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>count</key>
				<integer>1</integer>
				<key>keychar</key>
				<string>v</string>
				<key>keycode</key>
				<integer>-1</integer>
				<key>keymod</key>
				<integer>1048576</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.output.dispatchkeycombo</string>
			<key>uid</key>
			<string>A00FE09C-8869-4DE4-B922-B1D8A69FDCA4</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<false/>
				<key>escaping</key>
				<integer>102</integer>
				<key>script</key>
				<string># https://macscripter.net/viewtopic.php?id=26498

echo "{\rtf1\ansi\ansicpg1252\cocoartf949\cocoasubrtf270
{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
\margl1440\margr1440\vieww9000\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\ql\qnatural\pardirnatural
{\field{\*\fldinst{HYPERLINK \"${tab_url}\"}}{\fldrslt 
\f0\fs24 \cf0 ${tab_title}}}}" | pbcopy -Prefer rtf</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>0</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>9E69036A-1B66-4A10-9046-99A3EAA4B03A</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>concurrently</key>
				<true/>
				<key>escaping</key>
				<integer>68</integer>
				<key>script</key>
				<string>function run(argv) {
  // https://www.alfredforum.com/topic/9070-how-to-workflowenvironment-variables/
  ObjC.import('stdlib');
  const browser = $.getenv('browser');
  var browser_app = Application(browser)
  if (!browser_app.running()) {
    throw new Error('No running browser')
  }

  // https://www.alfredforum.com/topic/2013-how-to-get-frontmost-tab%E2%80%99s-url-and-title-of-various-browsers/
  if (['Google Chrome','Google Chrome Canary','Chromium','Opera','Vivaldi'].indexOf(browser) &gt; -1) {
    var tab_title = browser_app.windows[0].activeTab.name()
    var tab_url = browser_app.windows[0].activeTab.url()
  } else if (['Safari','Safari Technology Preview','Webkit'].indexOf(browser) &gt; -1) {
    var tab_title = browser_app.documents[0].name()
    var tab_url = browser_app.documents[0].url()
  } else {
    throw new Error('You need a supported browser as your frontmost app')
  }
  
  // https://stackoverflow.com/questions/3334341/json-to-string-variable-dump
  return JSON.stringify({
    "alfredworkflow": {
      "variables": {
        "tab_title": toUTF8(tab_title),
        "tab_url": tab_url,
        "tab_md": `[${tab_title}](${tab_url})`
      }
    }
  })
}

function toUTF8(s) {
  return s.split("").map(u).join("")
}

function u(character) {
  return '\\u' + character.codePointAt(0)
}</string>
				<key>scriptargtype</key>
				<integer>1</integer>
				<key>scriptfile</key>
				<string></string>
				<key>type</key>
				<integer>7</integer>
			</dict>
			<key>type</key>
			<string>alfred.workflow.action.script</string>
			<key>uid</key>
			<string>A9F3E232-7873-445F-AD50-A12415B273FE</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>inputstring</key>
				<string>{var:editor}</string>
				<key>matchcasesensitive</key>
				<false/>
				<key>matchmode</key>
				<integer>2</integer>
				<key>matchstring</key>
				<string>Notes|Evernote|scapple</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.filter</string>
			<key>uid</key>
			<string>B467D021-411C-452E-8810-B065722585C3</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>autopaste</key>
				<true/>
				<key>clipboardtext</key>
				<string>{var:tab_md}</string>
				<key>transient</key>
				<true/>
			</dict>
			<key>type</key>
			<string>alfred.workflow.output.clipboard</string>
			<key>uid</key>
			<string>6454D7E8-56CF-4DC4-A058-359AB7FED372</string>
			<key>version</key>
			<integer>2</integer>
		</dict>
		<dict>
			<key>config</key>
			<dict>
				<key>inputstring</key>
				<string>{var:editor}</string>
				<key>matchcasesensitive</key>
				<false/>
				<key>matchmode</key>
				<integer>2</integer>
				<key>matchstring</key>
				<string>^((?!(ulysses|Notes|Evernote|scapple)).)*$</string>
			</dict>
			<key>type</key>
			<string>alfred.workflow.utility.filter</string>
			<key>uid</key>
			<string>2F3318C1-8262-43BD-A456-EB2B2A94C650</string>
			<key>version</key>
			<integer>1</integer>
		</dict>
	</array>
	<key>readme</key>
	<string>Thanks the following resources:

1. Get frontmost tabâ€™s url and title of various browsers
2. How to get Bundle ID of Mac application?
3. [HOW TO] Workflow/environment variables


Q&amp;A

Q: Supported browser?
A: Google Chrome and Safari</string>
	<key>uidata</key>
	<dict>
		<key>2F3318C1-8262-43BD-A456-EB2B2A94C650</key>
		<dict>
			<key>note</key>
			<string>else</string>
			<key>xpos</key>
			<integer>520</integer>
			<key>ypos</key>
			<integer>390</integer>
		</dict>
		<key>494649E5-798B-46A8-B318-39FBCBF033A6</key>
		<dict>
			<key>note</key>
			<string>Ulysses shortcut</string>
			<key>xpos</key>
			<integer>790</integer>
			<key>ypos</key>
			<integer>10</integer>
		</dict>
		<key>6454D7E8-56CF-4DC4-A058-359AB7FED372</key>
		<dict>
			<key>note</key>
			<string>original markdown</string>
			<key>xpos</key>
			<integer>640</integer>
			<key>ypos</key>
			<integer>360</integer>
		</dict>
		<key>8942009E-7800-4303-B4CD-C81203ACC682</key>
		<dict>
			<key>colorindex</key>
			<integer>2</integer>
			<key>note</key>
			<string>Ulysses</string>
			<key>xpos</key>
			<integer>520</integer>
			<key>ypos</key>
			<integer>40</integer>
		</dict>
		<key>9E69036A-1B66-4A10-9046-99A3EAA4B03A</key>
		<dict>
			<key>note</key>
			<string>convert to RTF</string>
			<key>xpos</key>
			<integer>640</integer>
			<key>ypos</key>
			<integer>190</integer>
		</dict>
		<key>A00FE09C-8869-4DE4-B922-B1D8A69FDCA4</key>
		<dict>
			<key>xpos</key>
			<integer>800</integer>
			<key>ypos</key>
			<integer>190</integer>
		</dict>
		<key>A9F3E232-7873-445F-AD50-A12415B273FE</key>
		<dict>
			<key>note</key>
			<string>Get [Title](URL)</string>
			<key>xpos</key>
			<integer>260</integer>
			<key>ypos</key>
			<integer>190</integer>
		</dict>
		<key>B35F3739-AAF8-4F94-93A6-9B98060EDF42</key>
		<dict>
			<key>xpos</key>
			<integer>630</integer>
			<key>ypos</key>
			<integer>10</integer>
		</dict>
		<key>B467D021-411C-452E-8810-B065722585C3</key>
		<dict>
			<key>note</key>
			<string>Notes
Evernote
scapple</string>
			<key>xpos</key>
			<integer>520</integer>
			<key>ypos</key>
			<integer>220</integer>
		</dict>
		<key>ED3AEF7C-DD02-43F9-977C-DD012FA66446</key>
		<dict>
			<key>xpos</key>
			<integer>80</integer>
			<key>ypos</key>
			<integer>190</integer>
		</dict>
	</dict>
	<key>variables</key>
	<dict>
		<key>browser</key>
		<string>Google Chrome</string>
	</dict>
	<key>version</key>
	<string>0.1.1</string>
	<key>webaddress</key>
	<string>cdpath.xyz</string>
</dict>
</plist>
